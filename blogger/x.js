const e=document.querySelector(".posts"),t=document.querySelector(".more-post-container"),n=async n=>{n.preventDefault(),t.innerHTML="Loading…";const r=n.target.attributes.href.textContent,o=await(e=>fetch(e).then(e=>e.text()).then(e=>(new DOMParser).parseFromString(e,"text/html")))(r);o.querySelectorAll(".post-card").forEach(t=>e.append(t)),t.innerHTML=o.querySelector(".more-post-container").innerHTML},r=document.querySelector(".more-post");r&&r.addEventListener("click",e=>n(e));document.querySelector("input[type='search']").addEventListener("keyup",n=>(async n=>{if(n.preventDefault(),13===n.keyCode){t.remove(),e.innerHTML='<div class="search-message">Loading…</div>';const o=await(r=n.target.value,fetch(`https://samiode.com/feeds/posts/default?q=${r}&max-results=99999&alt=json`,{mode: 'cors',headers: {'Content-Type': 'application/json'}}).then(e=>e.json()).then(e=>e.feed.entry));o?(e.innerHTML="",o.forEach(t=>{const n=t.link[2].title,r=t.link[2].href,o=t.content.$t.replace(/(<([^>]+)>)/gi,"").substring(0,299),a=document.createElement("div");a.classList.add("post-card"),a.innerHTML=`<a href="${r}" title="${n}"><h2>${n}</h2></a><p>${o}…</p>`,e.innerHTML+=a.outerHTML})):e.innerHTML='<div class="search-message">Your search was not found.</div>'}var r})(n))
